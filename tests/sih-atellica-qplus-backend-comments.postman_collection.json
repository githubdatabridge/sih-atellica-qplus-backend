{
	"info": {
		"_postman_id": "d0fdb5a0-e524-4142-9caa-503f16ad9e8e",
		"name": "sih-atellica-qplus-backend-comments",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "3032084"
	},
	"item": [
		{
			"name": "Comments",
			"item": [
				{
					"name": "Test Users and Admin",
					"item": [
						{
							"name": "Test user1",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"  pm.response.to.have.status(200);\r",
											"});\r",
											"var jsonData = JSON.parse(responseBody);\r",
											"pm.collectionVariables.set('user1_id',jsonData.user.appUserId);\r",
											"pm.test(\"I am \"+jsonData.user.name+ \" roles: \"+jsonData.roles.join(\", \"), function () {\r",
											"  pm.expect(jsonData.user.name).to.exist;\r",
											"\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Cookie",
										"value": "X-Qlik-Session-{{x-vp}}={{sessionId_user1}}",
										"type": "text"
									},
									{
										"key": "x-app-name",
										"value": "{{x-app-name}}",
										"type": "text"
									},
									{
										"key": "x-vp",
										"value": "{{x-vp}}",
										"type": "text"
									},
									{
										"key": "x-tenant-id",
										"value": "{{x-tenant-id}}",
										"type": "text"
									},
									{
										"key": "x-customer-id",
										"value": "{{x-customer-id}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/auth/me",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"auth",
										"me"
									]
								}
							},
							"response": []
						},
						{
							"name": "Test user2",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"  pm.response.to.have.status(200);\r",
											"});\r",
											"var jsonData = JSON.parse(responseBody);\r",
											"pm.collectionVariables.set('user2_id',jsonData.user.appUserId);\r",
											"\r",
											"pm.test(\"I am \"+jsonData.user.name+ \" roles: \"+jsonData.roles.join(\", \"), function () {\r",
											"  pm.expect(jsonData.user.name).to.exist;\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Cookie",
										"value": "X-Qlik-Session-{{x-vp}}={{sessionId_user2}}",
										"type": "text"
									},
									{
										"key": "x-app-name",
										"value": "{{x-app-name}}",
										"type": "text"
									},
									{
										"key": "x-vp",
										"value": "{{x-vp}}",
										"type": "text"
									},
									{
										"key": "x-tenant-id",
										"value": "{{x-tenant-id}}",
										"type": "text"
									},
									{
										"key": "x-customer-id",
										"value": "{{x-customer-id}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/auth/me",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"auth",
										"me"
									]
								}
							},
							"response": []
						},
						{
							"name": "Test  admin",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"  pm.response.to.have.status(200);\r",
											"});\r",
											"var jsonData = JSON.parse(responseBody);\r",
											"\r",
											"var jsonData = JSON.parse(responseBody);\r",
											"pm.collectionVariables.set('admin_id',jsonData.user.appUserId);\r",
											"pm.test(\"I am \"+jsonData.user.name+ \" roles: \"+jsonData.roles.join(\", \"), function () {\r",
											"  pm.expect(jsonData.user.name).to.exist;\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Cookie",
										"value": "X-Qlik-Session-{{x-vp}}={{sessionId_admin}}",
										"type": "text"
									},
									{
										"key": "x-app-name",
										"value": "{{x-app-name}}",
										"type": "text"
									},
									{
										"key": "x-vp",
										"value": "{{x-vp}}",
										"type": "text"
									},
									{
										"key": "x-tenant-id",
										"value": "{{x-tenant-id}}",
										"type": "text"
									},
									{
										"key": "x-customer-id",
										"value": "{{x-customer-id}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/auth/me",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"auth",
										"me"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Comments Prepare test",
					"item": [
						{
							"name": "Admin create dataset",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);\r",
											"pm.collectionVariables.set(\"datasetId_comment\", jsonData.id);\r",
											"\r",
											"pm.test(\"Status code is 201\", function () {\r",
											"  pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Cookie",
										"value": "X-Qlik-Session-{{x-vp}}={{sessionId_admin}}",
										"type": "text"
									},
									{
										"key": "x-app-name",
										"value": "{{x-app-name}}",
										"type": "text"
									},
									{
										"key": "x-vp",
										"value": "{{x-vp}}",
										"type": "text"
									},
									{
										"key": "x-tenant-id",
										"value": "{{x-tenant-id}}",
										"type": "text"
									},
									{
										"key": "x-customer-id",
										"value": "{{x-customer-id}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"qlikAppId\": \"05cf243f-8413-42a2-a173-7f6b94c8a08e\",\r\n  \"title\": \"string\",\r\n  \"description\": \"string\",\r\n  \"label\": \"string\",\r\n  \"type\": \"string\",\r\n  \"visualizations\":[\r\n      {\r\n          \"name\":\"piechart\",\r\n          \"isBaseChart\":true\r\n      }\r\n  ],\r\n  \"dimensions\": [\r\n    {\r\n      \"qId\": \"9e0e820a-182f-4194-8262-5bc130d3e80b\",\r\n      \"label\": \"string\",\r\n      \"meta\": {\"test\":\"test\"}\r\n    },\r\n    {\r\n      \"qId\": \"9e0e820a-182f-4194-8262-5bc130d3e80b\",\r\n      \"meta\": {\"test\":\"test\"}\r\n    },  {\r\n      \"qId\": \"9e0e820a-182f-4194-8262-5bc130d3e80b\"\r\n    },\r\n    {\r\n      \"qId\": \"9e0e820a-182f-4194-8262-5bc130d3e80b\",\r\n      \"label\": \"string\"\r\n    }\r\n  ],\r\n  \"measures\": [\r\n    {\r\n      \"qId\": \"9e0e820a-182f-4194-8262-5bc130d3e80b\",\r\n      \"label\": \"string\",\r\n      \"meta\": {\"test\":\"test\"}\r\n    },\r\n    {\r\n      \"qId\": \"9e0e820a-182f-4194-8262-5bc130d3e80b\",\r\n      \"meta\": {\"test\":\"test\"}\r\n    },  {\r\n      \"qId\": \"9e0e820a-182f-4194-8262-5bc130d3e80b\"\r\n    },\r\n    {\r\n      \"qId\": \"9e0e820a-182f-4194-8262-5bc130d3e80b\",\r\n      \"label\": \"string\"\r\n    }\r\n  ],\r\n  \"filters\": [\r\n    {\r\n      \"qId\": \"9e0e820a-182f-4194-8262-5bc130d3e80b\",\r\n      \"label\": \"string\",\r\n      \"meta\": {\"test\":\"test\"}\r\n    },\r\n    {\r\n      \"qId\": \"9e0e820a-182f-4194-8262-5bc130d3e80b\",\r\n      \"meta\": {\"test\":\"test\"}\r\n    },  {\r\n      \"qId\": \"9e0e820a-182f-4194-8262-5bc130d3e80b\"\r\n    },\r\n    {\r\n      \"qId\": \"9e0e820a-182f-4194-8262-5bc130d3e80b\",\r\n      \"label\": \"string\"\r\n    }\r\n  ],\r\n  \"tags\": [\r\n    \"tg1\", \r\n    \"tg2\",\r\n    \"tg3\"\r\n  ]\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/datasets",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"datasets"
									]
								}
							},
							"response": []
						},
						{
							"name": "Admin create system report",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);\r",
											"pm.collectionVariables.set(\"systemReportId_comment\", jsonData.id);\r",
											"\r",
											"pm.test(\"Status code is 201\", function () {\r",
											"  pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Cookie",
										"value": "X-Qlik-Session-{{x-vp}}={{sessionId_admin}}",
										"type": "text"
									},
									{
										"key": "x-app-name",
										"value": "{{x-app-name}}",
										"type": "text"
									},
									{
										"key": "x-vp",
										"value": "{{x-vp}}",
										"type": "text"
									},
									{
										"key": "x-tenant-id",
										"value": "{{x-tenant-id}}",
										"type": "text"
									},
									{
										"key": "x-customer-id",
										"value": "{{x-customer-id}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"content\": {},\r\n  \"title\": \"system report\",\r\n  \"description\": \"string\",\r\n  \"visualizationType\": \"piechart\",\r\n  \"isPinwallable\": false,\r\n  \"datasetId\": {{datasetId_comment}},\r\n  \"pageId\": \"string\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/reports",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"reports"
									]
								}
							},
							"response": []
						},
						{
							"name": "User create report",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);\r",
											"pm.collectionVariables.set(\"reportId_comment\", jsonData.id);\r",
											"\r",
											"pm.test(\"Status code is 201\", function () {\r",
											"  pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Cookie",
										"value": "X-Qlik-Session-{{x-vp}}={{sessionId_user1}}",
										"type": "text"
									},
									{
										"key": "x-app-name",
										"value": "{{x-app-name}}",
										"type": "text"
									},
									{
										"key": "x-vp",
										"value": "{{x-vp}}",
										"type": "text"
									},
									{
										"key": "x-tenant-id",
										"value": "{{x-tenant-id}}",
										"type": "text"
									},
									{
										"key": "x-customer-id",
										"value": "{{x-customer-id}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"content\": {},\r\n  \"title\": \"string\",\r\n  \"description\": \"string\",\r\n  \"visualizationType\": \"piechart\",\r\n  \"isPinwallable\": false,\r\n  \"datasetId\": {{datasetId_comment}},\r\n  \"pageId\": \"string\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/reports",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"reports"
									]
								}
							},
							"response": []
						},
						{
							"name": "user1 share report with user2 and admin",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {\r",
											"  pm.response.to.have.status(201);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Cookie",
										"value": "X-Qlik-Session-{{x-vp}}={{sessionId_user1}}",
										"type": "text"
									},
									{
										"key": "x-app-name",
										"value": "{{x-app-name}}",
										"type": "text"
									},
									{
										"key": "x-vp",
										"value": "{{x-vp}}",
										"type": "text"
									},
									{
										"key": "x-tenant-id",
										"value": "{{x-tenant-id}}",
										"type": "text"
									},
									{
										"key": "x-customer-id",
										"value": "{{x-customer-id}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"appUserIds\": [\"{{user2_id}}\",\"{{admin_id}}\"]\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/reports/{{reportId_comment}}/share",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"reports",
										"{{reportId_comment}}",
										"share"
									]
								}
							},
							"response": []
						},
						{
							"name": "User create visualization",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);\r",
											"pm.collectionVariables.set(\"visualizationId_comment\", jsonData.id);\r",
											"\r",
											"pm.test(\"Status code is 200\", function () {\r",
											"  pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Cookie",
										"value": "X-Qlik-Session-{{x-vp}}={{sessionId_user1}}",
										"type": "text"
									},
									{
										"key": "x-app-name",
										"value": "{{x-app-name}}",
										"type": "text"
									},
									{
										"key": "x-vp",
										"value": "{{x-vp}}",
										"type": "text"
									},
									{
										"key": "x-tenant-id",
										"value": "{{x-tenant-id}}",
										"type": "text"
									},
									{
										"key": "x-customer-id",
										"value": "{{x-customer-id}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"appId\": \"string\",\r\n  \"componentId\": \"string\",\r\n  \"pageId\": \"string\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/visualizations",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"visualizations"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "CRUD Comments",
					"item": [
						{
							"name": "Report Comments",
							"item": [
								{
									"name": "create comment on report",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"var jsonData = JSON.parse(responseBody);\r",
													"pm.collectionVariables.set(\"reportId_commentId\", jsonData.id);\r",
													"\r",
													"pm.test(\"Status code is 200\", function () {\r",
													"  pm.response.to.have.status(200);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Cookie",
												"value": "X-Qlik-Session-{{x-vp}}={{sessionId_user1}}",
												"type": "text"
											},
											{
												"key": "x-app-name",
												"value": "{{x-app-name}}",
												"type": "text"
											},
											{
												"key": "x-vp",
												"value": "{{x-vp}}",
												"type": "text"
											},
											{
												"key": "x-tenant-id",
												"value": "{{x-tenant-id}}",
												"type": "text"
											},
											{
												"key": "x-customer-id",
												"value": "{{x-customer-id}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n  \"content\":\"{\\\"blocks\\\":[{\\\"key\\\":\\\"d3v6r\\\",\\\"text\\\":\\\"user2 comment\\\",\\\"type\\\":\\\"unstyled\\\",\\\"depth\\\":0,\\\"inlineStyleRanges\\\":[],\\\"entityRanges\\\":[{\\\"offset\\\":0,\\\"length\\\":15,\\\"key\\\":0}],\\\"data\\\":{}}],\\\"entityMap\\\":{\\\"0\\\":{\\\"type\\\":\\\"mention\\\",\\\"mutability\\\":\\\"SEGMENTED\\\",\\\"data\\\":{\\\"mention\\\":{\\\"appUserId\\\":\\\"{{user2_id}}\\\",\\\"name\\\":\\\"user2\\\",\\\"email\\\":\\\"\\\"}}}}}\",\r\n  \"scope\": \"string\",\r\n  \"reportId\": {{reportId_comment}}\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/comments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"comments"
											]
										}
									},
									"response": []
								},
								{
									"name": "user2 check action 200 UserTaggedInComment",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"var jsonData = JSON.parse(responseBody);\r",
													"\r",
													"pm.test(\"Have to have action of type UserTaggedInComment\", function () {\r",
													"    pm.expect(jsonData.pagination.total).to.eql(1);\r",
													"});\r",
													"\r",
													"pm.test(\"Status code is 200\", function () {\r",
													"  pm.response.to.have.status(200);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Cookie",
												"value": "X-Qlik-Session-{{x-vp}}={{sessionId_user2}}",
												"type": "text"
											},
											{
												"key": "x-app-name",
												"value": "{{x-app-name}}",
												"type": "text"
											},
											{
												"key": "x-vp",
												"value": "{{x-vp}}",
												"type": "text"
											},
											{
												"key": "x-tenant-id",
												"value": "{{x-tenant-id}}",
												"type": "text"
											},
											{
												"key": "x-customer-id",
												"value": "{{x-customer-id}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/actions/comments?filter[_reportId][eq]={{reportId_comment}}&filter[type][eq]={{UserTaggedInComment}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"actions",
												"comments"
											],
											"query": [
												{
													"key": "filter[_reportId][eq]",
													"value": "{{reportId_comment}}"
												},
												{
													"key": "filter[type][eq]",
													"value": "{{UserTaggedInComment}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "admin check action 200 UserCommentCreated",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"var jsonData = JSON.parse(responseBody);\r",
													"\r",
													"pm.test(\"Have to have action of type UserCommentCreated\", function () {\r",
													"    pm.expect(jsonData.pagination.total).to.eql(1);\r",
													"});\r",
													"\r",
													"pm.test(\"Status code is 200\", function () {\r",
													"  pm.response.to.have.status(200);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Cookie",
												"value": "X-Qlik-Session-{{x-vp}}={{sessionId_admin}}",
												"type": "text"
											},
											{
												"key": "x-app-name",
												"value": "{{x-app-name}}",
												"type": "text"
											},
											{
												"key": "x-vp",
												"value": "{{x-vp}}",
												"type": "text"
											},
											{
												"key": "x-tenant-id",
												"value": "{{x-tenant-id}}",
												"type": "text"
											},
											{
												"key": "x-customer-id",
												"value": "{{x-customer-id}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/actions/comments?filter[_reportId][eq]={{reportId_comment}}&filter[type][eq]={{UserCommentCreated}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"actions",
												"comments"
											],
											"query": [
												{
													"key": "filter[_reportId][eq]",
													"value": "{{reportId_comment}}"
												},
												{
													"key": "filter[type][eq]",
													"value": "{{UserCommentCreated}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "create comment on comment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"var jsonData = JSON.parse(responseBody);\r",
													"pm.collectionVariables.set(\"commentId_commentId\", jsonData.id);\r",
													"\r",
													"pm.test(\"Status code is 200\", function () {\r",
													"  pm.response.to.have.status(200);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Cookie",
												"value": "X-Qlik-Session-{{x-vp}}={{sessionId_user2}}",
												"type": "text"
											},
											{
												"key": "x-app-name",
												"value": "{{x-app-name}}",
												"type": "text"
											},
											{
												"key": "x-vp",
												"value": "{{x-vp}}",
												"type": "text"
											},
											{
												"key": "x-tenant-id",
												"value": "{{x-tenant-id}}",
												"type": "text"
											},
											{
												"key": "x-customer-id",
												"value": "{{x-customer-id}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n  \"content\":\"{}\",\r\n  \"scope\": \"string\",\r\n  \"commentId\": {{reportId_commentId}},\r\n  \"reportId\": {{reportId_comment}}\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/comments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"comments"
											]
										}
									},
									"response": []
								},
								{
									"name": "get total numebr of comments for report",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"var jsonData = JSON.parse(responseBody);\r",
													"pm.collectionVariables.set(\"comment_report_total\", jsonData.pagination.total===0?1:jsonData.pagination.total);\r",
													"\r",
													"pm.test(\"Status code is 200\", function () {\r",
													"  pm.response.to.have.status(200);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Cookie",
												"value": "X-Qlik-Session-{{x-vp}}={{sessionId_user1}}",
												"type": "text"
											},
											{
												"key": "x-app-name",
												"value": "{{x-app-name}}",
												"type": "text"
											},
											{
												"key": "x-vp",
												"value": "{{x-vp}}",
												"type": "text"
											},
											{
												"key": "x-tenant-id",
												"value": "{{x-tenant-id}}",
												"type": "text"
											},
											{
												"key": "x-customer-id",
												"value": "{{x-customer-id}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/comments/reports",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"comments",
												"reports"
											]
										}
									},
									"response": []
								},
								{
									"name": "get comments for reports",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"var jsonData = JSON.parse(responseBody);\r",
													"var id = pm.collectionVariables.get(\"reportId_commentId\")\r",
													"\r",
													"pm.test(\"Status code is 200\", function () {\r",
													"  pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Comment with id \"+id, function () {\r",
													"    var any = jsonData.data.some(x=>x.id===id)\r",
													"    pm.expect(any).to.eql(true);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Cookie",
												"value": "X-Qlik-Session-{{x-vp}}={{sessionId_user1}}",
												"type": "text"
											},
											{
												"key": "x-app-name",
												"value": "{{x-app-name}}",
												"type": "text"
											},
											{
												"key": "x-vp",
												"value": "{{x-vp}}",
												"type": "text"
											},
											{
												"key": "x-tenant-id",
												"value": "{{x-tenant-id}}",
												"type": "text"
											},
											{
												"key": "x-customer-id",
												"value": "{{x-customer-id}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/comments/reports?page=1&perPage={{comment_report_total}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"comments",
												"reports"
											],
											"query": [
												{
													"key": "page",
													"value": "1"
												},
												{
													"key": "perPage",
													"value": "{{comment_report_total}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "get comment by Id for comment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"var jsonData = JSON.parse(responseBody);\r",
													"var reportId = pm.collectionVariables.get(\"reportId_comment\")\r",
													"\r",
													"pm.test(\"Status code is 200\", function () {\r",
													"  pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Comment with reportId \" + reportId, function () {\r",
													"    var result = jsonData.reportId === reportId\r",
													"    pm.expect(result).to.eql(true);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Cookie",
												"value": "X-Qlik-Session-{{x-vp}}={{sessionId_user1}}",
												"type": "text"
											},
											{
												"key": "x-app-name",
												"value": "{{x-app-name}}",
												"type": "text"
											},
											{
												"key": "x-vp",
												"value": "{{x-vp}}",
												"type": "text"
											},
											{
												"key": "x-tenant-id",
												"value": "{{x-tenant-id}}",
												"type": "text"
											},
											{
												"key": "x-customer-id",
												"value": "{{x-customer-id}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/comments/{{commentId_commentId}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"comments",
												"{{commentId_commentId}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "comment parrent delete",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 204\", function () {\r",
													"  pm.response.to.have.status(204);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [
											{
												"key": "Cookie",
												"value": "X-Qlik-Session-{{x-vp}}={{sessionId_user1}}",
												"type": "text"
											},
											{
												"key": "x-app-name",
												"value": "{{x-app-name}}",
												"type": "text"
											},
											{
												"key": "x-vp",
												"value": "{{x-vp}}",
												"type": "text"
											},
											{
												"key": "x-tenant-id",
												"value": "{{x-tenant-id}}",
												"type": "text"
											},
											{
												"key": "x-customer-id",
												"value": "{{x-customer-id}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/comments/{{reportId_commentId}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"comments",
												"{{reportId_commentId}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "get comment by Id for reports | 404",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 404\", function () {\r",
													"  pm.response.to.have.status(404);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Cookie",
												"value": "X-Qlik-Session-{{x-vp}}={{sessionId_user1}}",
												"type": "text"
											},
											{
												"key": "x-app-name",
												"value": "{{x-app-name}}",
												"type": "text"
											},
											{
												"key": "x-vp",
												"value": "{{x-vp}}",
												"type": "text"
											},
											{
												"key": "x-tenant-id",
												"value": "{{x-tenant-id}}",
												"type": "text"
											},
											{
												"key": "x-customer-id",
												"value": "{{x-customer-id}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/comments/{{reportId_commentId}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"comments",
												"{{reportId_commentId}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "get comment by Id for comment | 404",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 404\", function () {\r",
													"  pm.response.to.have.status(404);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Cookie",
												"value": "X-Qlik-Session-{{x-vp}}={{sessionId_user1}}",
												"type": "text"
											},
											{
												"key": "x-app-name",
												"value": "{{x-app-name}}",
												"type": "text"
											},
											{
												"key": "x-vp",
												"value": "{{x-vp}}",
												"type": "text"
											},
											{
												"key": "x-tenant-id",
												"value": "{{x-tenant-id}}",
												"type": "text"
											},
											{
												"key": "x-customer-id",
												"value": "{{x-customer-id}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/comments/{{commentId_commentId}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"comments",
												"{{commentId_commentId}}"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "create comment on system report",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 403\", function () {\r",
											"  pm.response.to.have.status(403);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Cookie",
										"value": "X-Qlik-Session-{{x-vp}}={{sessionId_user1}}",
										"type": "text"
									},
									{
										"key": "x-app-name",
										"value": "{{x-app-name}}",
										"type": "text"
									},
									{
										"key": "x-vp",
										"value": "{{x-vp}}",
										"type": "text"
									},
									{
										"key": "x-tenant-id",
										"value": "{{x-tenant-id}}",
										"type": "text"
									},
									{
										"key": "x-customer-id",
										"value": "{{x-customer-id}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"content\":\"{}\",\r\n  \"scope\": \"string\",\r\n  \"commentId\": null,\r\n  \"reportId\": {{systemReportId_comment}}\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/comments",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"comments"
									]
								}
							},
							"response": []
						},
						{
							"name": "create comment on visualization",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);\r",
											"pm.collectionVariables.set(\"visualizationId_commentId\", jsonData.id);\r",
											"\r",
											"pm.test(\"Status code is 200\", function () {\r",
											"  pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Cookie",
										"value": "X-Qlik-Session-{{x-vp}}={{sessionId_user1}}",
										"type": "text"
									},
									{
										"key": "x-app-name",
										"value": "{{x-app-name}}",
										"type": "text"
									},
									{
										"key": "x-vp",
										"value": "{{x-vp}}",
										"type": "text"
									},
									{
										"key": "x-tenant-id",
										"value": "{{x-tenant-id}}",
										"type": "text"
									},
									{
										"key": "x-customer-id",
										"value": "{{x-customer-id}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"content\":\"{}\",\r\n  \"scope\": \"string\",\r\n  \"commentId\": null,\r\n  \"visualizationId\": {{visualizationId_comment}}\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/comments",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"comments"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"const commentTextString = JSON.parse(`{",
									"    \"blocks\":",
									"    [",
									"      {",
									"        \"key\":\"epfm\",",
									"        \"text\":\"this is a bookmark test with a tagging action s.mikaric\",",
									"        \"type\":\"unstyled\",",
									"        \"depth\":0,",
									"        \"inlineStyleRanges\":[],",
									"        \"entityRanges\":",
									"        [",
									"          {",
									"            \"offset\":46,",
									"            \"length\":16,",
									"            \"key\":0",
									"          }",
									"        ],",
									"        \"data\":{}",
									"      }",
									"    ],",
									"    \"entityMap\":",
									"    {",
									"      \"0\":{",
									"        \"type\":\"mention\",",
									"        \"mutability\":\"SEGMENTED\",",
									"        \"data\":{",
									"          \"mention\":{",
									"            \"email\":\"\",",
									"            \"firstName\":\"\",",
									"            \"name\":\"s.mikaric\",",
									"            \"appUserId\":\"ceec306d-f313-4691-b3ad-7b8689f6e10c\"",
									"          }",
									"        }",
									"      }",
									"    }",
									"  }`)",
									"  pm.collectionVariables.set(\"commentTextString\",commentTextString)"
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					]
				},
				{
					"name": "Comments End test",
					"item": [
						{
							"name": "Admin delete system report",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"  pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											"pm.test(\"CleanUp Test\", function () {;\r",
											"    pm.collectionVariables.set(\"systemReportId_pinwall\", null);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Cookie",
										"value": "X-Qlik-Session-{{x-vp}}={{sessionId_admin}}",
										"type": "text"
									},
									{
										"key": "x-app-name",
										"value": "{{x-app-name}}",
										"type": "text"
									},
									{
										"key": "x-vp",
										"value": "{{x-vp}}",
										"type": "text"
									},
									{
										"key": "x-tenant-id",
										"value": "{{x-tenant-id}}",
										"type": "text"
									},
									{
										"key": "x-customer-id",
										"value": "{{x-customer-id}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/reports/{{systemReportId_comment}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"reports",
										"{{systemReportId_comment}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "User delete report",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {\r",
											"  pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											"pm.test(\"CleanUp Test\", function () {\r",
											"    pm.collectionVariables.set(\"reportId_pinwall\", null);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Cookie",
										"value": "X-Qlik-Session-{{x-vp}}={{sessionId_user1}}",
										"type": "text"
									},
									{
										"key": "x-app-name",
										"value": "{{x-app-name}}",
										"type": "text"
									},
									{
										"key": "x-vp",
										"value": "{{x-vp}}",
										"type": "text"
									},
									{
										"key": "x-tenant-id",
										"value": "{{x-tenant-id}}",
										"type": "text"
									},
									{
										"key": "x-customer-id",
										"value": "{{x-customer-id}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/reports/{{reportId_comment}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"reports",
										"{{reportId_comment}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Admin delete dataset",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"  pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"CleanUp Test\", function () {\r",
											"    pm.collectionVariables.set(\"datasetId_pinwall\", null);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Cookie",
										"value": "X-Qlik-Session-{{x-vp}}={{sessionId_admin}}",
										"type": "text"
									},
									{
										"key": "x-app-name",
										"value": "{{x-app-name}}",
										"type": "text"
									},
									{
										"key": "x-vp",
										"value": "{{x-vp}}",
										"type": "text"
									},
									{
										"key": "x-tenant-id",
										"value": "{{x-tenant-id}}",
										"type": "text"
									},
									{
										"key": "x-customer-id",
										"value": "{{x-customer-id}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/datasets/{{datasetId_comment}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"datasets",
										"{{datasetId_comment}}"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:3000/app"
		},
		{
			"key": "sessionId_user1",
			"value": "b3656d89-3b03-4dca-bd29-ca45e411b3d8"
		},
		{
			"key": "sessionId_admin",
			"value": "483538fa-4200-4bcd-80f4-3f3ec2031882"
		},
		{
			"key": "x-vp",
			"value": "localhost"
		},
		{
			"key": "x-app-name",
			"value": "insight_poc"
		},
		{
			"key": "user1_id",
			"value": ""
		},
		{
			"key": "user2_id",
			"value": ""
		},
		{
			"key": "reportId_comment",
			"value": ""
		},
		{
			"key": "systemReportId_comment",
			"value": ""
		},
		{
			"key": "datasetId_comment",
			"value": ""
		},
		{
			"key": "visualizationId_comment",
			"value": ""
		},
		{
			"key": "UserCommentCreated",
			"value": "user.comment.created"
		},
		{
			"key": "UserTaggedInComment",
			"value": "user.tag.comment"
		}
	]
}